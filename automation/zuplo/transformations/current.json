{
    "name": "ZuploLogs",
    "description": "Default transformation for Zuplo logs",
    "created": "2025-08-20T15:01:38.335203460+00:00",
    "modified": "2025-08-20T15:01:38.335203460+00:00",
    "settings": {
      "is_default": true,
      "rate_limit": null,
      "sql_transform": "SELECT *,\n  multiIf(\n    hashmap_message IS NULL, CAST(map(), 'Map(String, String)'),\n    hashmap_message = '', CAST(map(), 'Map(String, String)'),\n    length(arrayFilter(x -> length(splitByString('=', x)) = 2, splitByString(' ', replaceRegexpAll(assumeNotNull(hashmap_message), '([A-Za-z]+):\\\\s*([^\\\\s]+)', '\\\\1=\\\\2')))) = 0, CAST(map(), 'Map(String, String)'),\n    mapFromArrays(\n      arrayMap(x -> trim(splitByString('=', x)[1]), \n               arrayFilter(x -> length(splitByString('=', x)) = 2, splitByString(' ', replaceRegexpAll(assumeNotNull(hashmap_message), '([A-Za-z]+):\\\\s*([^\\\\s]+)', '\\\\1=\\\\2')))),\n      arrayMap(x -> trim(splitByString('=', x)[2]), \n               arrayFilter(x -> length(splitByString('=', x)) = 2, splitByString(' ', replaceRegexpAll(assumeNotNull(hashmap_message), '([A-Za-z]+):\\\\s*([^\\\\s]+)', '\\\\1=\\\\2'))))\n    )\n  ) AS auto_key_value_map,\n  toString(rand()) AS auto_random_string\nFROM {STREAM}",
      "null_values": [
        "-",
        "null"
      ],
      "sample_data": {
        "accountName": "test account",
        "asOrganization": "VNIS JOINT STOCK COMPANY",
        "asn": "150814",
        "city": "Ho Chi Minh City",
        "clientIP": "103.67.184.73",
        "colo": "HKG",
        "continent": "AS",
        "country": "VN",
        "deploymentName": "mockbin-main-647f01c",
        "durationMs": 445,
        "hashmap_message": "User login successful request_id:12334 exec_time=24ms mem_used=78mb",
        "instanceId": "b7b1ada5-3b63-4037-a814-0d76305a3957",
        "latitude": "10.82302",
        "logSourceVersion": "1.0",
        "longitude": "106.62965",
        "method": "GET",
        "metroCode": "test",
        "operationId": "test",
        "postalCode": "71606",
        "projectName": "testProject",
        "region": "Hải Dương Province",
        "regionCode": "61",
        "requestId": "e232846b-912b-4855-8034-56e501bd10c9",
        "routePath": "/(.*)",
        "statusCode": 203,
        "systemRouteName": "Test",
        "timestamp": "2025-02-05T22:42:36.715Z",
        "timezone": "Asia/Ho_Chi_Minh",
        "url": "https://api.mockbin.io/68f17ffc93a94889a099c7869aed498d",
        "userSub": "Test",
        "zuploUserAgent": "Zuplo/6.51.9"
      },
      "shadow_table": null,
      "output_columns": [
        {
          "name": "auto_random_string",
          "datatype": {
            "type": "string",
            "index": false,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "auto_key_value_map",
          "datatype": {
            "type": "map",
            "index": false,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "elements": [
              {
                "name": "key",
                "type": "string"
              },
              {
                "name": "value",
                "type": "string"
              }
            ],
            "suppress": false
          }
        },
        {
          "name": "accountName",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "asOrganization",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "asn",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "city",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "clientIP",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "colo",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "continent",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "country",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "deploymentName",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "durationMs",
          "datatype": {
            "type": "int32",
            "index": true,
            "index_options": {
              "fulltext": false
            },
            "primary": false,
            "ignore": false,
            "format": null,
            "resolution": "seconds",
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "hashmap_message",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "instanceId",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "latitude",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "logSourceVersion",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "longitude",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "method",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "metroCode",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "operationId",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "postalCode",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "projectName",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "region",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "regionCode",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "requestId",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "routePath",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "statusCode",
          "datatype": {
            "type": "uint32",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "systemRouteName",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "timestamp",
          "datatype": {
            "type": "datetime",
            "index": false,
            "primary": true,
            "format": "(?P<year>[0-9]{4})-(?P<month>[0-9]{2})-(?P<day>[0-9]{2})T(?P<hour>[0-9]{2}):(?P<minute>[0-9]{2}):(?P<second>[0-9]{2})\\.(?P<millisecond>[0-9]{3})Z",
            "resolution": "ms",
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "timezone",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "url",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "userSub",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        },
        {
          "name": "zuploUserAgent",
          "datatype": {
            "type": "string",
            "index": true,
            "primary": false,
            "format": null,
            "resolution": null,
            "default": null,
            "script": null,
            "source": null,
            "suppress": false
          }
        }
      ],
      "compression": "none",
      "wurfl": null,
      "format_details": {
        "flattening": {
          "depth": 10,
          "active": true,
          "map_flattening_strategy": {
            "left": ".",
            "right": ""
          },
          "slice_flattening_strategy": {
            "left": "[",
            "right": "]"
          }
        }
      }
    },
    "type": "json"
  }
  